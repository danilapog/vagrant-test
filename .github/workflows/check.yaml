name: Sboam test

on:
  push:

  
jobs:
  sync:
    name: "Sync"
    runs-on: ubuntu-22.04
    steps:
    - name: Add Oracle VirtualBox APT repo (jammy)
      run: |
          sudo mkdir -p /etc/apt/keyrings
          curl -fsSL https://www.virtualbox.org/download/oracle_vbox_2016.asc \
            | sudo tee /etc/apt/keyrings/oracle-virtualbox.asc >/dev/null
          sudo chmod 0644 /etc/apt/keyrings/oracle-virtualbox.asc
          sudo tee /etc/apt/sources.list.d/virtualbox.sources >/dev/null <<'EOF'
          Types: deb
          URIs: https://download.virtualbox.org/virtualbox/debian
          Suites: jammy
          Components: contrib
          Signed-By: /etc/apt/keyrings/oracle-virtualbox.asc
          EOF
          sudo wget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg
          sudo echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(grep -oP '(?<=UBUNTU_CODENAME=).*' /etc/os-release || lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/hashicorp.list
          sudo apt-get update
          sudo apt install vagrant
          
    - name: Install VirtualBox 7.1
      run: |
          sudo apt-get install -y --no-install-recommends \
          build-essential dkms linux-headers-$(uname -r) virtualbox-7.1
    - name: Check VBox version
      run: VBoxManage --version

    

